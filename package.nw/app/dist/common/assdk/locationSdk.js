'use strict';var _exports;function init(){function a(i){let j=d.getGeoSetting();return j.checked?void i(null,{statusCode:200},JSON.stringify({status:0,result:{location:{lat:j.latitude,lng:j.longitude}},from:'Setting'})):g&&h?void i(null,{statusCode:200},JSON.stringify({status:0,result:{location:{lat:g,lng:h}}})):void b({url:`${'http://apis.map.qq.com/ws/location/v1/ip'}?key=${e}`,needToken:-1},i)}const b=require('../request/request.js'),c=require('../../actions/webviewActions.js'),d=require('../../stores/webviewStores.js'),e='JMRBZ-R4HCD-X674O-PXLN4-B7CLH-42BSB',f='wxdevtools';let g,h;_exports={getLocation:function(j,k){a((l,m,n)=>{let o={};l||200!==m.statusCode||(n=JSON.parse(n),0==n.status&&('Setting'!==n.from&&(g=n.result.location.lat,h=n.result.location.lng),o={latitude:n.result.location.lat,longitude:n.result.location.lng},o.errMsg='getLocation:ok')),o.errMsg||(o.errMsg='getLocation:fail timeout'),k(o)})},openLocation:function(j,k){let l=j.args,m=l.latitude,n=l.longitude,o=`marker=coord:${m},${n}`;o+=`;title:${encodeURIComponent(l.name||' ')}`,o+=`;addr:${encodeURIComponent(l.address||' ')}`,j.url=`${'http://apis.map.qq.com/tools/poimarker'}?type=0&${o}&key=${e}&referer=${f}`,c.sendASSDK('openLocation',j,k)},chooseLocation:function(j,k){a((l,m,n)=>{if(!l&&200===m.statusCode&&(n=JSON.parse(n),0==n.status)){let o=n.result.location.lat,p=n.result.location.lng;return j.url=`${'http://apis.map.qq.com/tools/locpicker'}?search=1&type=1&coord=${o},${p}&key=${e}&referer=${f}`,void c.sendASSDK('chooseLocation',j,k)}k({errMsg:'chooseLocation:fail timeout'})})}}}init(),module.exports=_exports;