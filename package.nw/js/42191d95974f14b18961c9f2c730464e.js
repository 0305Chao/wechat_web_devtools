'use strict';var _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};!function(require,directRequire){const a=require('fs'),b=require('path'),c=require('./common/locales/index.js'),d=require('./9fdd4ac31a05c27355910f0d74accd4c.js'),f={},e=(a)=>Object.prototype.toString.call(a).toLowerCase().slice(8,-1),g=(b)=>{if(a.existsSync(b)){let c=a.statSync(b);return c.isDirectory()}return!1};f.configFileExists=(c)=>{if(!c)return{error:new Error('project not valid')};const d={error:null},e=b.join(c.projectpath,'project.config.json');try{const b=a.existsSync(e);d.exists=b}catch(a){d.error=a}return d},f.getConfigFileInfo=(h)=>{if(!h)return{error:new Error('project not valid')};const i={error:null},j=b.join(h.projectpath,'project.config.json');try{let k,l,m;try{l=a.readFileSync(j)}catch(a){k=a;let b=f.configFileExists(h);throw k.type=b.error||b.exists?'readerror':'notexists',a}try{m=JSON.parse(l)}catch(a){throw k=a,a.type='parseerror',a}if('object'!==e(m))throw k=new Error('config is not an object'),k.type='parseerror',k;if(m.miniprogramRoot){let a=b.join(h.projectpath,m.miniprogramRoot);if(!g(a))throw k=new Error(c.config.JSON_CONTENT_SHOULD_BE.format(['project.config.json miniprogramRoot','\u76EE\u5F55'])),k.type='contenterror',k;if(0!=a.indexOf(h.projectpath+b.sep))throw k=new Error(c.config.JSON_CONTENT_SHOULD_BE.format(['project.config.json miniprogramRoot','\u9879\u76EE\u5185\u76EE\u5F55'])),k.type='contenterror',k}else m.miniprogramRoot=m.client?m.client:'./';let n=m.compileType||h.compileType;if(n==d.plugin&&!m.pluginRoot)throw k=new Error(c.config.PROJECT_JSON_VALUE_NO_FOUND.format('pluginRoot')),k.type='contenterror',k;if(m.pluginRoot){let a=b.join(h.projectpath,m.pluginRoot);if(!g(a))throw k=new Error(c.config.JSON_CONTENT_SHOULD_BE.format(['project.config.json pluginRoot','\u76EE\u5F55'])),k.type='contenterror',k;if(0!=a.indexOf(h.projectpath+b.sep))throw k=new Error(c.config.JSON_CONTENT_SHOULD_BE.format(['project.config.json pluginRoot','\u9879\u76EE\u5185\u76EE\u5F55'])),k.type='contenterror',k}i.raw=l,m.condiction=m.condition,delete m.condition,i.config=m}catch(a){i.error=a}return i},f.writeObjectToConfigFile=(c,d)=>{if(!c)return{error:new Error('project not valid')};if('object'!==e(d))return{error:new Error('content is not an object')};const f={error:null},g=b.join(c.projectpath,'project.config.json');try{d=_extends({},d),d.condition=d.condiction,delete d.condiction;const b=JSON.stringify(d,null,'\t');a.writeFileSync(g,b)}catch(a){a.type='writeerror',f.error=a}return f},f.generateConfigTemplate=()=>{return{description:'\u9879\u76EE\u914D\u7F6E\u6587\u4EF6\u3002'}},module.exports=f}(require('lazyload'),require);