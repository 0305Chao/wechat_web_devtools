'use strict';!function(require,directRequire){const a=require('./bc78839ccca8df9e5ceeb7fae11b7be2.js'),b=require('./56c390e04c10e91a4aa2a2c19d9a885d.js'),c=require('./cc2c2970ff81ae4a83123e81ee123da2.js'),d=require('./78294f0b5b50fc38258d7028553744ef.js'),e=require('./36244f5aa8a25574083d64e28953b466.js'),f=require('./5eb00762b104199e0cf0af7efbe591da.js'),g=require('./5719b6ded53098ffd9e848abcac30153.js'),h=require('./da7c31daaf542cf1796023d8e344b98a.js'),i=require('./84b183688a46c9e2626d3e6f83365e13.js'),j='darwin'===process.platform,k=(a)=>new Promise(async(b,c)=>{try{let h;if(h=d.checkProjectPath(a),h.error)return c(h.error);let i;if(h=d.checkProjectConfigJSON(a),h.error)return c(h.error);if(i=h.config,!i.appid||!i.projectname)return c(g.ERROR.NOT_FOUND_IN_PROJECT_CONFIG_JSON(i.appid?'projectname':'appid'));if(e.isOpened(`${i.appid}_${i.projectname}`,a)){process.stderr.write('isopened\n');const a=global.windowMap.get('MAIN');if(a)return a.show(),j||(a.setAlwaysOnTop(!0),setTimeout(()=>{a.setAlwaysOnTop(!1)},20)),setTimeout(()=>{e.openSimulatorAndDebugger(),e.compile()},20),void b()}let k;try{k=await f.getAppInfo(i.appid)}catch(a){c(a)}await e.openProject(k,i,a),b()}catch(a){c(g.ERROR.GENERIC_ERROR(a.toString()))}});module.exports={registerHandlers:(c)=>{c.get('/open',async(c,d)=>{try{global.Win.showFunction&&(global.Win.show=global.Win.showFunction);const e=a.getState();if(e.window.mainWindow!==b.MAIN_WINDOW_TYPE.DEV&&e.window.mainWindow!==b.MAIN_WINDOW_TYPE.WEB_DEBUGGER)j?global.Win.show():global.Win.focus();else{const a=global.windowMap.get('MAIN');a&&(j?a.show():a.focus())}let f=c.mQuery.projectpath;const g=decodeURIComponent(c.mQuery.cli||'');g?f?h('cli_open_project'):h('cli_open_ide'):f?h('http_open_project'):h('http_open_ide'),f&&(f=decodeURIComponent(f),await k(f)),d.statusCode=200,d.end()}catch(a){d.statusCode=400,d.end(a.toString(),'utf8')}}),c.get('/quit',async(a,b)=>{b.statusCode=200,b.end(),i.quit()})},openProject:k}}(require('lazyload'),require);