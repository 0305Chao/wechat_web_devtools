'use strict';!function(require,directRequire){const a=require('fs'),b=require('path'),c=require('http'),d=require('request'),e=require('./72653d4b93cdd7443296229431a7aa9a.js'),f=require('./74af8a23ddee45c6c1265c88746b66bc.js'),g=require('./c74067b2c1f476fa940f6315c56fb29e.js');module.exports={start:(h,i)=>new Promise((j,k)=>{try{e.info(`start cli server, local port ${h}, cli client port ${i||'undefined'}`);const k=c.createServer(f.userRequestHandler);k.listen(h,'127.0.0.1');const l=nw.App.getDataPath();if(a.writeFileSync(b.join(l,'.ide'),h,'utf8'),i)d({url:`http://127.0.0.1:${i}/updatePort?port=${h}`},(a)=>{a&&e.error('fail to notify remote cli program:',a)}),d({url:`http://127.0.0.1:${i}/wechatdevtools/updateport/${h}`},(a)=>{a&&e.error('fail to notify remote driver program:',a)});else try{i=parseInt(a.readFileSync(b.join(l,'.cli'),'utf8')),d({url:`${'http://127.0.0.1'}:${i}/updatePort?port=${h}`,timeout:2e3},(a)=>{a?e.info(`no cli client started`):g.updateRemoteCLIPort(i)})}catch(a){e.info(`no cli client started`)}j()}catch(a){k(a)}})}}(require('lazyload'),require);