(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=378)})({283:function(a,b,c){function d(){let a=`WIDGET`;e.connect(a);let b=document.getElementById('myCanvas');b.addEventListener('click',function(a){console.error(a),e.send({command:'ON_CANVAS_TAP',data:{x:a.pageX,y:a.pageY}})})}const e=c(4);navigator.userAgent;'complete'==document.readyState?d():window.addEventListener('load',()=>{d()}),a.exports={send:e.send,registerCallback:e.registerCallback}},284:function(a){const b=(a)=>{var b=a.slice(0);return b[3]/=255,`rgba(${b.join(',')})`};let c={};const d=function(a,d=!1){if(!a)return;const e=document.getElementById('myCanvas'),f=e.getContext('2d');!1===d&&(f.fillStyle='#000000',f.strokeStyle='#000000',f.shadowColor='#000000',f.shadowBlur=0,f.shadowOffsetX=0,f.shadowOffsetY=0,f.setTransform(1,0,0,1,0,0),f.clearRect(0,0,e.width,e.height)),a.forEach(function(a){var d=a.method,e=a.data;if(/^set/.test(d)){var g=d[3].toLowerCase()+d.slice(4),h=void 0;if('fillStyle'===g||'strokeStyle'===g){if('normal'===e[0])h=b(e[1]);else if('linear'===e[0]){var h=f.createLinearGradient.apply(f,e[1]);e[2].forEach(function(a){var c=a[0],d=b(a[1]);h.addColorStop(c,d)})}else if('radial'===e[0]){var i=e[1][0],j=e[1][1],k=e[1][2],h=f.createRadialGradient.apply(f,[i,j,0,i,j,k]);e[2].forEach(function(a){var c=a[0],d=b(a[1]);h.addColorStop(c,d)})}f[g]=h}else if('globalAlpha'===g)f[g]=e[0]/255;else if('shadow'===g){var l=['shadowOffsetX','shadowOffsetY','shadowBlur','shadowColor'];e.forEach(function(a,c){f[l[c]]='shadowColor'===l[c]?b(a):a})}else'fontSize'===g?f.font=f.font.replace(/\d+\.?\d*px/,e[0]+'px'):'textBaseline'===g?('normal'===e[0]&&(e[0]='alphabetic'),f[g]=e[0]):f[g]=e[0]}else if('fillPath'===d||'strokePath'===d)d=d.replace(/Path/,''),f.beginPath(),e.forEach(function(a){f[a.method].apply(f,a.data)}),f[d]();else if('fillText'===d)f.fillText.apply(f,e);else if('drawImage'===d){let[a,...b]=e;c=c||{},a=a.replace('wxfile://','http://wxfile.open.weixin.qq.com/'),a=0==a.indexOf('/')||0==a.indexOf('\\')?`.${a}`:a,c[a]?c[a].ready?f.drawImage.apply(f,[c[a],...b]):c[a].queue.push(b):(c[a]=new Image,c[a].src=a,c[a].queue=[],c[a].onload=()=>{c[a].ready=!0,f.drawImage.apply(f,[c[a],...b]),c[a].queue.forEach((b)=>{f.drawImage.apply(f,[c[a],...b])}),c[a].queue=[]})}else f[d].apply(f,e)})};a.exports={drawCanvas:function(a){let b=a.args,{actions:c,reserve:e}=b;d(c,e)},setCanvas:function(a){let b=document.getElementById('myCanvas');a.width&&b.setAttribute('width',a.width),a.height&&b.setAttribute('height',a.height),a.style&&b.setAttribute('style',a.style)}}},378:function(a,b,c){const d=c(283),e=c(284);d.registerCallback((a)=>{let{command:b,data:c}=a;'SET_CANVAS'===b?e.setCanvas(c):'DRAW_CANVAS'==b&&e.drawCanvas(c)})},4:function(a){function b(a){m=a?a:m;var e=g(p);k=new f(l,`${m}#${e}#`),k.onopen=function(){let a=[].concat(o);o=[],a.forEach((a)=>{c(a)})},k.onclose=function(){k=null,setTimeout(()=>{b(a)},100)},k.onmessage=function(a){try{let b=JSON.parse(a.data);d(b)}catch(a){}}}function c(a){k&&k.readyState===f.OPEN?k.send(JSON.stringify(a)):o.push(a)}function d(){n.forEach((a)=>{try{a.apply(this,arguments)}catch(a){console.error(a)}})}var e=window.navigator||window.__global.navigator,f=window.WebSocket||window.__global.WebSocket,g=window.prompt||window.__global.prompt,h=e.userAgent,i=h.match(/port\/(\d*)/),j=i?parseInt(i[1]):9974,k=null,l=`ws://127.0.0.1:${j}`,m=null,n=[],o=[];const p='GET_MESSAGE_TOKEN';a.exports={connect:b,send:c,registerCallback:(a)=>{n.push(a)},getWs(){return k}}}});