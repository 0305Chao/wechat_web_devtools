'use strict';!function(require,directRequire){function a(a){const b=a.headers.host,d=!a.connection.encrypted||/^http:/.test(a.url)?'http':'https',e='http'==d?a.url:d+'://'+b+a.url,f=c.parse(e);return f.pureHref=f.href.replace(/\?.*/,'').replace(/\#.*/,''),f}function b(a){const b=a.headers['user-agent']||'',c=b.match(/token\/(\S*)/);return c&&c[1]&&A.validateSessionToken(c[1],z.UA_TOKEN)}const c=require('url'),d=require('path'),e=require('./6242f55dbdfe53c2f07b7a51568311f2.js'),f='https://clients1.google.com/tbproxy/af/',g='http://aboutblank',{weappURLRegular:h,weappASURLRegular:i,weappLocalIdRegular:j,weappEditorServiceRegular:k,weappWidgetPageRegular:l,weappWidgetServiceRegular:m,weappGamePageRegular:n,weappTraceRegular:o,weappUsrFileReqular:p,weappStoreFileReqular:q,weappTmpFileReqular:r,weappUsrFilePathPrefix:s,weappTmpFilePathPrefix:t,weappStoreFilePathPrefix:u}=e,v=require('./3bfffbe88b3d923921f851c0697974fe.js'),w=require('./d3976cc01aeebc5b09e11c4135b6bd8d.js'),x=require('./730f2a99f4d5cff2946dd0a3bad0a600.js'),y=require('./07af6655c180a0694f993b79d5b077df.js'),{validType:z,tokenManager:A}=require('./dc244a5ba483ad6e0acd267d3b91b282.js');module.exports={forceLocalProxy:[h,i,j,g,f,k,l,m,n,o,p,q,r],dealLocalResponse(c,e,h){if(!b(c))return h(403,{},'');const i=a(c),k=i.pureHref;if(0==k.indexOf('/appservice'))return void x.getAppServiceSource(k).then((a)=>{h(200,{},a)}).catch(()=>{h(404,{},'')});if(0==k.indexOf('/calibration'))return void h(200,{},'');if(0==k.indexOf('/__pageframe__')){const a=i.href;return void x.getWebviewSource(a).then((b)=>{const c={};'.svg'===d.extname(a)&&(c['Content-Type']='image/svg+xml'),h(200,c,b)}).catch(()=>{h(404,{},'')})}return 0==k.indexOf('/editor')?void x.getEditorSource(k).then((a)=>{h(200,a.headers||{},a.body)}).catch(()=>{h(404,{},'')}):0==k.indexOf('/trace')?void y.getTraceRoute(i,(a,b)=>{a?h(500,{},JSON.stringify(a.message)):h(200,{},JSON.stringify(b))}):0==k.indexOf('/widgetwebview')?void x.getWidgetWebviewResource(k).then((a)=>{h(200,{},a)}).catch(()=>{h(404,{},'')}):0==k.indexOf('/widgetservice')?void x.getWidgetServiceResource(k).then((a)=>{h(200,{},a)}).catch(()=>{h(404,{},'')}):0==k.indexOf('/game')?void x.getGamePageResource(k).then((a)=>{h(200,{},a)}).catch((a)=>{h(404,{},a.toString())}):0==k.indexOf('/aboutblank')?void h(200,{},''):0==k.indexOf('/favicon.ico')?void h(200,{},''):0===k.indexOf(f)?void h(400,{},''):0===k.indexOf(g)?void h(200,{},''):j.test(k)||0===k.indexOf('http://'+t+'/')||0===k.indexOf('http://'+u+'/')||0===k.indexOf('http://'+s+'/')||0===k.indexOf('/'+t+'/')||0===k.indexOf('/'+u+'/')||0===k.indexOf('/'+s+'/')?void x.getLocalIdResponse(k.replace(j,'wxfile://')).then((a)=>{h(200,{},a)}).catch(()=>{h(404,{},'')}):n.test(k)?void x.getGamePageResource(k).then((a)=>{h(200,{},a)}).catch((a)=>{h(404,{},a.toString())}):0===k.indexOf('/'+s)?void x.getUsrFileResponse(k).then((a)=>{h(200,{},a)}).catch(()=>{h(404,{},'')}):void(0==k.indexOf('/experience')&&x.getExperienceResource(k).then((a)=>{h(200,{},a)}).catch((a)=>{h(404,{},a.toString())}))}}}(require('lazyload'),require);