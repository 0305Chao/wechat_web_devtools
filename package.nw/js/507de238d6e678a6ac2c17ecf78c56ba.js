'use strict';!function(require,directRequire){const a=require('./f171257bbcaef547a3cf27266ccb0db2.js'),b=require('./3bfffbe88b3d923921f851c0697974fe.js'),c=require('./15ba1827c7f6564a45df6bd44da3a977.js'),d=require('./72653d4b93cdd7443296229431a7aa9a.js'),f=require('./0634ee2ebd3e560d9d4804ecc960160f.js'),g=require('./common/locales/index.js');module.exports={getPhoneNumber:async function(h,e,i){const j=b.getCurrent(),k=e.api,l=e.callbackID;try{const{body:d}=await c({url:`${a.getUserPhoneNumber}`,method:'post',body:JSON.stringify({appid:b.getProjectAppID()}),needToken:1,needAppID:1,needCheckErrCode:-1}),e=d.jsapi_baseresponse,j=e?parseInt(e.errcode):-1e4;if(0===j){let a,b;try{b=JSON.parse(d.data),a=JSON.parse(b.data)}catch(a){throw`${g.config.GET_DATA_ERROR} ${a}`}if(!a||!a.mobile)throw g.config.USER_NOT_BOUND_PHONE;if(a.need_auth)throw g.config.PHONE_BOUND_NEED_VERIFIED;h({type:f.SIMULATOR_SET_AUTHORIZE_CONFIRM,data:{show:!0,imageUrl:d.appicon_url,appName:d.appname,scopeList:[d.scope],callback:(a)=>{let c={};a?c={errMsg:`${k}:ok`,encryptedData:b.encryptedData,iv:b.iv}:c.errMsg=`${k}:fail user deny`,h({type:f.JSSDK_CALLBACK,webviewID:i,callbackID:l,res:c})}}})}else if(-12001==j)throw g.config.APPID_NO_PERMISSIONS;else if(-12004==j)throw g.config.WX_LOGIN_FIRST;else throw`${g.config.SYSTEM_ERROR} errorCode:${j}`}catch(a){return h({type:f.SIMULATOR_SET_CONFIRM,data:{show:!0,title:g.config.GET_PHONE_NUMBER_ERROR,content:a.toString()}}),d.error(`getPhoneNumber catch error ${a}`),{errMsg:`${k}:fail ${a}`}}}}}(require('lazyload'),require);